<!doctype html> 
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Merchant Support Gateway ‚Äî Independent Partner</title>

  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    .fade-in { animation: fadeIn .28s ease both; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(6px) } to { opacity: 1; transform: none } }
    .toast { position: fixed; right: 20px; bottom: 20px; z-index: 9999; }
    .spinner { border: 3px solid #e5e7eb; border-top: 3px solid #10b981; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; margin: 0 auto; }
    @keyframes spin { 0% { transform: rotate(0deg);} 100% { transform: rotate(360deg);} }
  </style>

  <link id="faviconLink" rel="icon" href="">
</head>
<body class="bg-gray-50 text-gray-900 antialiased">

<script>
  const CONFIG = {
    logoUrl: "https://cdn.shopify.com/static/shopify-favicon.png",
    whatsappNumber: "2349135251130",
    telegramUsername: "Xcellexert",
    supportEmail: "support@example.com",

    advisor: {
      name: "Juan Manuel",
      title: "Compliance & Merchant Support Advisor",
      partnerBadge: "Independent Partner Resource",
      staffId: "ADV-342991",
      caseId: "CS-114882",
      years: "5+ years",
      merchantsHelped: 76,
      rating: 4.9,
      photoUrl: "https://i.pinimg.com/736x/1c/65/b3/1c65b3c672767808e39ba1669c8e1482.jpg"
    },

    ticketId: "SHOP-9001"
  };
</script>

<!-- LOADING -->
<div id="loading" class="min-h-screen flex items-center justify-center px-6">
  <div class="max-w-md w-full text-center">
    <img id="logoTopLoading" alt="Logo" class="mx-auto mb-4 w-14 h-14 rounded-full object-cover border border-emerald-200" src="" />
    <h2 class="text-lg font-semibold mb-3">Preparing your compliance & growth advisor workspace‚Ä¶</h2>
    <div class="spinner" aria-hidden="true"></div>
  </div>
</div>

<!-- MAIN -->
<main id="main" class="hidden min-h-screen pb-12">
  <header class="sticky top-0 bg-white/80 backdrop-blur border-b z-30">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <img id="logoTop" alt="Logo" class="w-9 h-9 rounded-full object-cover border border-emerald-200" src="" />
        <div>
          <div class="text-sm font-semibold">Merchant Support Gateway</div>
          <div class="text-xs text-gray-500">Shopify-aligned | staff advisor</div>
        </div>
      </div>
    </div>
  </header>

  <!-- advisor -->
  <section class="max-w-5xl mx-auto px-4 py-10">
    <div class="bg-white rounded-2xl shadow-sm p-6 md:p-8">
      <div class="flex items-start gap-6">
        <img id="advisorPhoto" src="" alt="Advisor" class="w-24 h-24 md:w-28 md:h-28 rounded-full object-cover border" />
        <div>
          <h1 id="advisorName" class="text-2xl font-semibold tracking-tight"></h1>
          <p id="advisorTitle" class="text-emerald-700 text-sm font-medium mt-1"></p>
          <div class="flex flex-wrap items-center gap-x-4 gap-y-1 mt-2 text-xs text-gray-600">
            <span id="staffIdSpan"></span>
            <span id="caseIdSpan"></span>
          </div>
        </div>
      </div>
      <p class="mt-6 text-sm text-gray-700">
        Your advisor will begin with a quick <strong>staff-style compliance audit</strong>.  
        If technical fixes are required, you'll be referred to a certified developer partner.
      </p>
      <div class="grid sm:grid-cols-3 gap-3 mt-6">
        <button data-channel="whatsapp" class="contactBtn bg-emerald-600 hover:bg-emerald-700 text-white py-3 rounded-xl">WhatsApp</button>
        <button data-channel="telegram" class="contactBtn bg-blue-500 hover:bg-blue-600 text-white py-3 rounded-xl">Telegram</button>
        <button data-channel="email" class="contactBtn bg-gray-900 hover:bg-black text-white py-3 rounded-xl">Secure Email</button>
      </div>
    </div>
  </section>

  <!-- footer -->
  <footer class="mt-10 bg-white">
    <div class="max-w-6xl mx-auto px-4 py-6 text-xs text-gray-500">
      <p>¬© <span id="year"></span> Merchant Support Gateway ‚Äî Independent Partner resource.</p>
    </div>
  </footer>
</main>

<!-- MODAL -->
<div id="modal" class="fixed inset-0 hidden items-center justify-center bg-black bg-opacity-40 z-50">
  <div class="bg-white rounded-2xl shadow-xl p-6 w-full max-w-md fade-in">
    <div class="flex justify-between items-center mb-4">
      <h3 class="text-lg font-semibold">Submit Ticket (ID: <span id="ticketIdText"></span>)</h3>
      <button id="modalClose" class="text-gray-500 hover:text-gray-700">‚úï</button>
    </div>

    <div>
      <label class="text-xs text-gray-600">Full Name</label>
      <input id="inputName" class="w-full border rounded-lg p-2 mb-3" placeholder="John Doe"/>

      <label class="text-xs text-gray-600">Store URL</label>
      <input id="inputStore" class="w-full border rounded-lg p-2 mb-3" placeholder="example.myshopify.com"/>

      <label class="text-xs text-gray-600">Email</label>
      <input id="inputEmail" type="email" class="w-full border rounded-lg p-2 mb-3" placeholder="you@example.com"/>

      <label class="text-xs text-gray-600">Issue</label>
      <select id="inputIssue" class="w-full border rounded-lg p-2 mb-3">
        <option>Compliance Warning</option>
        <option>Checkout / Payment Issue</option>
        <option>Store Visibility (SEO)</option>
        <option>Other</option>
      </select>

      <label class="text-xs text-gray-600">Additional Details</label>
      <textarea id="inputDetails" rows="3" class="w-full border rounded-lg p-2 mb-4" placeholder="Describe your issue..."></textarea>

      <div class="flex gap-3">
        <button id="sendBtn" class="flex-1 bg-emerald-600 hover:bg-emerald-700 text-white py-2 rounded-lg">Submit & Open Channel</button>
        <button id="cancelBtn" class="flex-1 border rounded-lg py-2">Cancel</button>
      </div>
    </div>
  </div>
</div>

<div id="toast" class="toast hidden">
  <div class="bg-emerald-600 text-white px-4 py-2 rounded shadow">‚úÖ Ticket submitted ‚Äî opening your chat...</div>
</div>

<script>
  const FALLBACK_PHOTO = "https://images.unsplash.com/photo-1593032457860-9e1d5bc3c7d4?q=80&w=640&auto=format&fit=crop";

  document.addEventListener("DOMContentLoaded", () => {
    document.getElementById('faviconLink').href = CONFIG.logoUrl;
    document.getElementById('logoTop').src = CONFIG.logoUrl;
    document.getElementById('logoTopLoading').src = CONFIG.logoUrl;

    const photoEl = document.getElementById('advisorPhoto');
    photoEl.src = CONFIG.advisor.photoUrl;
    photoEl.onerror = () => { photoEl.src = FALLBACK_PHOTO; };

    document.getElementById('advisorName').innerText = CONFIG.advisor.name;
    document.getElementById('advisorTitle').innerText = CONFIG.advisor.title;
    document.getElementById('staffIdSpan').innerHTML = `Advisor ID: <strong>${CONFIG.advisor.staffId}</strong>`;
    document.getElementById('caseIdSpan').innerHTML = `Case ID: <strong>${CONFIG.advisor.caseId}</strong>`;
    document.getElementById('year').innerText = new Date().getFullYear();
    document.getElementById('ticketIdText').innerText = CONFIG.ticketId;

    setTimeout(() => {
      document.getElementById('loading').classList.add('hidden');
      document.getElementById('main').classList.remove('hidden');
    }, 1600);

    document.querySelectorAll('.contactBtn').forEach(btn => {
      btn.addEventListener('click', () => openModal(btn.getAttribute('data-channel')));
    });

    document.getElementById('modalClose').addEventListener('click', closeModal);
    document.getElementById('cancelBtn').addEventListener('click', closeModal);
    document.getElementById('sendBtn').addEventListener('click', sendTicket);
  });

  let activeChannel = null;
  function openModal(channel){ activeChannel = channel; document.getElementById('modal').classList.remove('hidden'); }
  function closeModal(){ document.getElementById('modal').classList.add('hidden'); }

  function showToast(){
    const t = document.getElementById('toast');
    t.classList.remove('hidden');
    setTimeout(()=> t.classList.add('hidden'), 4000);
  }

  function sendTicket(){
    const name = document.getElementById('inputName').value.trim();
    const store = document.getElementById('inputStore').value.trim();
    const email = document.getElementById('inputEmail').value.trim();
    const issue = document.getElementById('inputIssue').value;
    const details = document.getElementById('inputDetails').value.trim();

    if(!name || !store || !email){
      alert('Please provide Name, Store URL and Email before continuing.');
      return;
    }

    const message = `üü¢ Shopify Support Ticket\nTicket ID: ${CONFIG.ticketId}\nüë§ Name: ${name}\nüõí Store: ${store}\nüìß Email: ${email}\n‚ùì Issue: ${issue}\nüìù Details: ${details}`;
    const encoded = encodeURIComponent(message);

    if(activeChannel === 'whatsapp'){
      window.open(`https://wa.me/${CONFIG.whatsappNumber}?text=${encoded}`, '_blank');
    } else if(activeChannel === 'telegram'){
      window.open(`https://t.me/${CONFIG.telegramUsername}?text=${encoded}`, '_blank');
    } else if(activeChannel === 'email'){
      window.location.href = `mailto:${CONFIG.supportEmail}?subject=Support Ticket ${CONFIG.ticketId}&body=${encoded}`;
    }

    closeModal();
    showToast();
  }
</script>
</body>
</html>
